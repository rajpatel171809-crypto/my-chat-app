<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chet For Friends</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
</head>
<body style="background-color: #f0ede5; font-family: sans-serif; margin: 0; padding: 0;">

    <div id="chat-container" style="max-width: 500px; margin: auto;">
        <div style="background: #075e54; color: white; padding: 15px; display: flex; align-items: center; justify-content: space-between;">
            <div><b>Raj Admin</b></div>
            <button onclick="window.location.reload()" style="background: #25d366; border: none; border-radius: 50%; width: 40px; height: 40px; color: white; cursor: pointer;">ðŸ“ž</button>
        </div>
        
        <div style="text-align: center; padding: 20px;">
            <p>Aapka App Live Hai!</p>
            <input type="text" id="phone" placeholder="+918200630050" style="width: 80%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px;">
            <br>
            <button onclick="sendOTP()" id="otp-btn" style="background: #075e54; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Get OTP</button>
            <div id="recaptcha-container" style="margin-top: 20px; display: flex; justify-content: center;"></div>
        </div>
    </div>

    <script>
        // 1. Firebase Configuration (Aapka sahi wala data)
        const firebaseConfig = {
            apiKey: "AIzaSyDrffEKvbZZ2F6RbQisfZTLhY5EWL6CMeU",
            authDomain: "chet-for-friends.firebaseapp.com",
            projectId: "chet-for-friends",
            storageBucket: "chet-for-friends.appspot.com",
            messagingSenderId: "939963245688",
            appId: "1:939963245688:web:03b0448694462f6e89b98d",
            measurementId: "G-N1DH62BPJ8"
        };

        // 2. Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        // 3. OTP Function with reCAPTCHA
        function sendOTP() {
            const phoneNumber = document.getElementById('phone').value;

            if (!phoneNumber.startsWith('+')) {
                alert('Dhyan dein: Number +91 se shuru karein!');
                return;
            }
            
            // reCAPTCHA ko load karna
            if (!window.recaptchaVerifier) {
                window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                    'size': 'normal',
                    'callback': (response) => {
                        console.log("reCAPTCHA solved!");
                    }
                });
            }

            // OTP bhejna
            firebase.auth().signInWithPhoneNumber(phoneNumber, window.recaptchaVerifier)
                .then((confirmationResult) => {
                    const code = prompt('Enter 6-digit OTP:');
                    if (code) {
                        return confirmationResult.confirm(code);
                    }
                })
                .then((result) => {
                    alert('Success! Aap login ho gaye hain.');
                })
                .catch((error) => {
                    alert('Galti: ' + error.message);
                    if (window.recaptchaVerifier) {
                        window.recaptchaVerifier.render().then(widgetId => {
                            grecaptcha.reset(widgetId);
                        });
                    }
                });
        }
    </script>
</body>
</html>
